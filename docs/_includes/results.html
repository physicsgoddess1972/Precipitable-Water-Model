<script type="text/javascript">$(document).ready(function(){$(".tabs").tabs();});</script>
<script>
	function getChcked() {
		var chks = document.querySelectorAll('input[type="checkbox"]');
		var checked = [];
		for (var i = 0; i < chks.length; i++) {
			if (chks[i].checked) {
				checked.push(chks[i].name)
			}
		}
		console.log(checked);
		return checked;
	}
	$('#button').click(function(){
		var darr = [];
		var iter = getChcked();
		var name = $('.tabs .active').attr('href').split('#').pop().replace('-', '.') + '.pmat.app'
		for (var i = 0; i < iter.length; i++){
			console.log(iter.length)
			let url = "https://" + name + '/raw/main/out/figs/' + iter[i] + '.pdf'
			console.log(url)
			darr.push(url)
		}
		console.log(darr);
		download_files(darr);
		document.querySelectorAll('input[type=checkbox]').forEach(el => el.checked = false);
	})
</script>
<div class="mdl-grid demo-content">
<div class="mdl-shadow--2dp mdl-cell mdl-cell--stretch mdl-cell--12-col" style="background-color: white">
	<div class="row">
		<div class="col s12">
			<ul class="tabs">
				<li class="tab col s3" style="padding-top: 10px; padding-left: 10px; padding-right: 10px">
					<i style="color: #4C69EC" id="button" name="action" type="submit">
						<i class="material-icons">save</i>
					</i>
				</li>
				{% for cities in site.data.dash %}
					{% if cities.active == true %}
						<li class="tab col s3">
							<a href="#{{cities.city | remove: ' ' | downcase}}-{{cities.state | remove: ' ' | downcase}}">
								{{cities.city}}, {{cities.state}}
							</a>
						</li>
					{% else %}
						<li class="tab col s3 disabled">
							<a href="#{{cities.city | remove: ' ' | downcase}}-{{cities.state | remove: ' ' | downcase}}">
								{{cities.city}}, {{cities.state}}
							</a>
						</li>
					{% endif %}
				{% endfor %}
			</ul>
		</div>
		{% for cities in site.data.dash %}
			{% if cities.active == true %}
				<div class="col s12" id="#{{cities.city | remove: ' ' | downcase}}-{{cities.state | remove: ' ' | downcase}}">
					<div style="display: flex;">
						<div class="data-nav" style="height: 250px">
							<div class="mdl-card__actions mdl-card--border">
								<div class="row">
									<div class="col s12">
										<ul class="tabs">
											<li class="tab col s3"><a href="#clear-{{cities.state | remove: ' ' | downcase}}">
												<i class="material-icons">brightness_5</i></a>
											</li>
											<li class="tab col s3"><a href="#over-{{cities.state | remove: ' ' | downcase}}">
												<i class="material-icons">cloud</i></a>
											</li>
											<li class="tab col s3"><a href="#chart-{{cities.state | remove: ' ' | downcase}}">
												<i class="material-icons">insert_chart_outlined</i></a>
											</li>
											<li class="tab col s3"><a href="#poster-{{cities.state | remove: ' ' | downcase}}">
												<i class="material-icons">table_chart</i></a>
											</li>
											<li class="tab col s3"><a href="#data-product-{{cities.state | remove: ' ' | downcase}}">
												<i class="material-icons">insights</i></a>
											</li>
										</ul>
									</div>
								</div>
								<div id="clear-{{cities.state | remove: ' ' | downcase}}" class="col s12">
									<h5>Plot Set: Clear Sky</h5>
									<form action="#">
										<a><label><input type="checkbox" name="timeseries"><span>Time Series</span></label></a><br>
										<a><label><input type="checkbox" name="analytics"><span>Analytics</span></label></a><br>
										<a><label><input type="checkbox" name="sensor"><span>Sensor Time Series</span></label></a><br>
										<a><label><input type="checkbox" name="pacman"><span>Pacman</span></label></a><br>
									</form>
								</div>
								<div id="over-{{cities.state | remove: ' ' | downcase}}" class="col s12">
									<h5>Plot Set: Overcast</h5>
									<form action="#">
										<a><label><input type="checkbox" name="timeseries_overcast"><span>Time Series</span></label></a><br>
										<a><label><input type="checkbox" name="analytics_overcast"><span>Analytics</span></label></a><br>
										<a><label><input type="checkbox" name="sensor_overcast"><span>Sensor Time Series</span></label></a><br>
										<a><label><input type="checkbox" name="pacman_overcast"><span>Pacman</span></label></a><br>
									</form>
								</div>
								<div id="chart-{{cities.state | remove: ' ' | downcase}}" class="col s12">
									<h5>Plot Set: Charts</h5>
									<form action="#">
										<a><label><input type="checkbox" name="charts"><span>Charts</span></label></a>
										<br>
									</form>
								</div>
								<div id="poster-{{cities.state | remove: ' ' | downcase}}" class="col s12">
									<h5>Plot Set: Poster</h5>
									<form action="#">
										<a><label><input type="checkbox" name="poster"><span>Poster</span></label></a>
										<br>
									</form>
								</div>
								<div id="data-product-{{cities.state | remove: ' ' | downcase}}" class="col s12">
									<h5>IR Data Product</h5>
									<form action="#">
										<label for="quantity"><span>Input a temperature in C</span><input type="number" id="quantity" name="quantity"></label>
									</form>
								</div>
							</div>
						</div>
<!--						<div class="img-small-{{cities.state | remove: ' ' | downcase}}" style="width: 50%; padding-top: 15px; padding-right: 5px">-->
<!--							<img src="https://github.com/physicsgoddess1972/Precipitable-Water-Model/blob/docs/docs/assets/img/dash/{{cities.img}}?raw=true/">-->
<!--						</div>-->
					</div>
				</div>
			{% endif %}
		{% endfor %}
	</div>	
</div>
</div>