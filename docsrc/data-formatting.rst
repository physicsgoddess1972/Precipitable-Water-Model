***************
Working with data and PMAT
***************
This chapter will discuss the data components associated with PMAT. The first section will detail the formatting guidelines of the input files, followed by another discussion regarding the various output files generated by the software suite.

==================
Input Data Formatting
==================
The two input files discussed in this section include a YAML configuration file and a Comma Separated Value data file.

-----------------------
Configuration Input
-----------------------
The role of the configuration file is to store a series of parameters that includes sensor information, analytic parameters, logging options, and the site identifiers for the University of Wyoming’s Upper-Air database and the University of Utah’s MesoWest database.

A template of the configuration file presented in Template XX shows the structure of the data fields. The filename of this file must be ``_pmat.yml``.

-----------------------
Raw Data File
-----------------------
The raw data file is processed, through pattern identification, allowing for a flexible format with few strict requirements. One of these requirements is that the sky and ground temperature should be separated into groups and ordered the same way as the configuration file. Here are three examples of data files:
- Dataset Example 1 <https://github.com/physicsgoddess1972/Precipitable-Water-Model/blob/master/data/example/example1.csv>
- Dataset Example 2 <https://github.com/physicsgoddess1972/Precipitable-Water-Model/blob/master/data/example/example2.csv>
- Dataset Example 3 <https://github.com/physicsgoddess1972/Precipitable-Water-Model/blob/master/data/example/example1.csv>

It should be noted that the columns do not have to be in any set order, with one small caveat, the model pulls the data from columns with headers containing specific words or phrases. The caveat is with regards to Ground and Sky temperature readings. The temperature measurements must go in consecutive order by sensor as determined by ``_pmat.yml``.

For example, if the order of the sensors in ``_pmat.yml`` is 1610 TE, FLIR i3, and then AMES 1. Then the order of the ground and sky temperature measurements in the dataset should be: 1610 TE, FLIR i3, and then AMES 1. (As seen in Dataset 2).

======================
Output Data Formatting
======================
There are a variety of data files generated by the software suite. The data files are stored as CSV files, with each row presenting data for a single day.

-----------------------
General data files
-----------------------
The primary data file [``master_data.csv``] generated is the full dataset that includes:
* Date
* time
* sky condition (clear sky/overcast)
* ground temperature
* sky temperature
* Radiosonde PWV
* Relative Humidity
* Dewpoint
* User comments

-----------------------
Machine learning
-----------------------
The machine learning data file includes five columns:
* Date
* Average brightness temperature
* Average PWV
* Relative Humidity
* Sky Condition

This data set supports the classification of data by the sky condition label.

-----------------------
Analytic results
-----------------------
The main analytical results are stored as YAML configuration files. The results of each step in the iterative analysis process are saved to a file with the name ``_output.yml``. An example of this file is presented below.
[sample of _output.yml]
[table of the fields in _output.yml]

The averaged results of the steps are also stored in a YAML file.
[sample of _results.yml]
[table of the fields in _results.yml]